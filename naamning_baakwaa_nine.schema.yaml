# Rime schema
# encoding: utf-8

schema:
  schema_id: naamning_baakwaa_nine
  name: "南寧白話(9鍵)"
  version: "2022.03.17"
  author:
    - LeiMaau <leimaau@qq.com>
  description: |
    採用『香港語言學會粵語拼音方案』
    聲調輸入 q平 v上 x去 （雙擊爲陽調）
    IPA版提供多種字形轉換和提示音爲IPA
    提供一種反查方案，[`]普拼反查粵拼
    PC上按Ctrl+Enter可將提示音上屏，按Ctrl+Shift+Enter可將候選項上屏
    註釋reverse_lookup/tags可顯示釋義，可根據需要自行開啓
    項目主頁 https://github.com/leimaau/naamning_jyutping
  dependencies:
    - luna_pinyin

switches:
  __include: naamning_baakwaa.schema:/switches

engine:
  __include: naamning_baakwaa.schema:/engine
  __patch:
      segmentors:
        - ascii_segmentor
        - matcher
        - affix_segmentor@luna_pinyin
        - abc_segmentor
        - punct_segmentor
        - fallback_segmentor
      translators:
        - punct_translator
        - script_translator
        - script_translator@luna_pinyin
      filters:
        - simplifier
        - uniquifier

speller:
  __include: naamning_baakwaa.schema:/speller
  __patch:
      algebra:
        - xform/\(.+?\)//             # 忽略釋義
        - xform/「.+?」//             # 忽略釋義
        - derive/([123456])//         # 忽略声调
    #    - derive/^([aeiou])/q$1/      # 增加 q 表示喉塞
        - xform/1/q/                  # 陰平
        - xform/4/qq/                 # 陽平
        - xform/2/v/                  # 陰上
        - xform/5/vv/                 # 陽上
        - xform/3/x/                  # 陰去
        - xform/6/xx/                 # 陽去
        - derive/^(z|c|s)y$/$1z/      # 兼容 (zcs)y -> (zcs)z 傳教士方案
        - derive/^(z|c|s)y$/$1ii/     # 兼容 (zcs)y -> (zcs)ii 客家話方案
    #    - derive/a(m|p)$/o$1/         # 兼容 a(m|p) -> o(m|p) 其他邕潯片
    #    - derive/aa(m)$/o$1/          # 兼容 aam -> om 其他邕潯片
    #    - derive/^j/nj/               # 兼容 j -> nj 其他邕潯片 nj[ȵ]
        - derive/a([nt])$/eo$1/       # 模糊 a(nt) -> eo(nt)
        - derive/ui$/eoi/          	  # 模糊 ui -> eoi
        - derive/yu$/eoi/          	  # 模糊 yu -> eoi
        - derive/^sl/s/               # 模糊 sl -> s
        - derive/^(g|k)wo/$1o/        # 模糊 (gk)wo -> (gk)o
        - derive/^(g|k)wik/$1ik/      # 模糊 (gk)wik -> (gk)ik
        - derive/i$/ei/          	  # 模糊 i -> ei
        - derive/u$/ou/          	  # 模糊 u -> ou
        - derive/saang$/sang/         # 模糊 saang -> sang 庚韻二等字文讀
    #    - derive/kok$/fok/            # 模糊 kok -> fok
        - derive/fut$/kut/            # 模糊 fut -> kut 「豁達、蛞蝓」
        - derive/gwaat$/kut/          # 模糊 gwaat -> kut 「包括、聒噪」
        - derive/dik$/d/              # 快出「的」字
    #    - derive/^jy?([aeiou])/y$1/   # 容錯 j -> y
    #    - derive/^jyu/yu/             # 容錯 jyu -> yu
    #    - derive/^jyu/ju/             # 容錯 jyu -> ju
        - derive/yu/y/                # 容錯 jyu -> jy
        - derive/aa$/a/               # 容錯 aa -> a
        - derive/oe(ng|k)$/eo$1/      # 容錯 oe(ng|k) -> eo(ng|k)
        - derive/eo([int])$/oe$1/     # 容錯 eo(int) -> oe(int)
        - derive/eoi$/eoy/            # 教院式 eoi -> eoy
        - abbrev/^([a-z]).+$/$1/      # 首字母簡拼
        - abbrev/^([a-z]{2}).+$/$1/   # 首2字母簡拼
        - abbrev/^(gw|kw|ng).+$/$1/   # 聲母簡拼
        - abbrev/^([s][l]).+$/$1/     # 聲母簡拼
        - derive/([abc])/a/
        - derive/([def])/d/
        - derive/([ghi])/g/
        - derive/([jkl])/j/
        - derive/([mno])/m/
        - derive/([pqrs])/p/
        - derive/([tuv])/t/
        - derive/([wxyz])/w/

menu:
  __include: naamning_baakwaa.schema:/menu

translator:
  __include: naamning_baakwaa.schema:/translator
  __patch:
      prism: naamning_baakwaa_nine

luna_pinyin:
  __include: naamning_baakwaa.schema:/luna_pinyin

reverse_lookup:
  __include: naamning_baakwaa.schema:/reverse_lookup

punctuator:
  __include: naamning_baakwaa.schema:/punctuator

key_binder:
  __include: naamning_baakwaa.schema:/key_binder

recognizer:
  __include: naamning_baakwaa.schema:/recognizer

zh_hk:
  __include: naamning_baakwaa.schema:/zh_hk

zh_tw:
  __include: naamning_baakwaa.schema:/zh_tw

zh_jp:
  __include: naamning_baakwaa.schema:/zh_jp

emoji_cn:
  __include: naamning_baakwaa.schema:/emoji_cn
