# Rime schema
# encoding: utf-8

schema:
  schema_id: naamning_bingwaa_fourteen
  name: "南寧(亭子)平話(14鍵)"
  version: "2020.05.11"
  author:
    - LeiMaau <leimaau@qq.com>
  description: |
    採用『香港語言學會粵語拼音方案』
    聲調輸入 q平 v上 x去 （雙擊爲陽調）
    IPA版提供多種字形轉換和提示音爲IPA
    提供四種反查方案，[`]普拼反查粵拼，[x]五筆畫反查粵拼，[v]倉頡五代反查粵拼，[r]五筆86反查粵拼
    PC上按Ctrl+Enter可將提示音上屏，按Ctrl+Shift+Enter可將候選項上屏
    註釋reverse_lookup/tags可顯示釋義，可根據需要自行開啓
    項目主頁 https://github.com/leimaau/naamning_jyutping
  dependencies:
    - luna_pinyin
    - stroke
    - cangjie5
    - wubi86

switches:
  __include: naamning_bingwaa.schema:/switches

engine:
  __include: naamning_bingwaa.schema:/engine
  __patch:
      segmentors:
        - ascii_segmentor
        - matcher
        - affix_segmentor@luna_pinyin
        - affix_segmentor@stroke
        - affix_segmentor@cangjie5
        - affix_segmentor@wubi86
        - abc_segmentor
        - punct_segmentor
        - fallback_segmentor
      translators:
        - punct_translator
        - script_translator
        - script_translator@luna_pinyin
        - table_translator@stroke
        - table_translator@cangjie5
        - table_translator@wubi86
      filters:
        - simplifier
        - uniquifier

speller:
  __include: naamning_bingwaa.schema:/speller
  __patch:
      algebra:
        - xform/\(.+?\)//             # 忽略釋義
        - xform/「.+?」//             # 忽略釋義
        - derive/([123456])//         # 忽略声调
    #    - derive/^([aeiou])/q$1/      # 增加 q 表示喉塞
        - xform/1/q/                  # 陰平
        - xform/4/qq/                 # 陽平
        - xform/2/v/                  # 陰上
        - xform/5/vv/                 # 陽上
        - xform/3/x/                  # 陰去
        - xform/6/xx/                 # 陽去
        - derive/^nj/j/               # 模糊 nj -> j
        - derive/^sl/s/               # 模糊 sl -> s
        - derive/^ngia(ng|k)/njia(ng|k)/        # 模糊 ngia(ng|k) -> njia(ng|k)
        - derive/^(g|k)wo/$1o/        # 模糊 (gk)wo -> (gk)o
        - derive/^(g|k)wik/$1ik/      # 模糊 (gk)wik -> (gk)ik
        - derive/i$/ei/          	  # 模糊 i -> ei
        - derive/u$/ou/          	  # 模糊 u -> ou
        - derive/dik$/d/              # 快出「的」字
    #    - derive/^jy?([aeiou])/y$1/   # 容錯 j -> y
    #    - derive/^jyu/yu/             # 容錯 jyu -> yu
    #    - derive/^jyu/ju/             # 容錯 jyu -> ju
        - derive/yu/y/                # 容錯 jyu -> jy
        - derive/aa$/a/               # 容錯 aa -> a
        - derive/oe(ng|k)$/eo$1/      # 容錯 oe(ng|k) -> eo(ng|k)
        - derive/ia(ng|k)$/e$1/       # 容錯 ia(ng|k) -> e(ng|k)
        - derive/o(ng|k)$/u$1/        # 容錯 o(ng|k) -> u(ng|k)
        - abbrev/^([a-z]).+$/$1/      # 首字母簡拼
        - abbrev/^([a-z]{2}).+$/$1/   # 首2字母簡拼
        - abbrev/^(gw|kw|ng).+$/$1/   # 聲母簡拼
        - abbrev/^([s][l]).+$/$1/     # 聲母簡拼
        - derive/([qw])/q/
        - derive/([er])/e/
        - derive/([ty])/t/
        - derive/([ui])/u/
        - derive/([op])/o/
        - derive/([as])/a/
        - derive/([df])/d/
        - derive/([gh])/g/
        - derive/([jk])/j/
        - derive/l/l/
        - derive/([zx])/z/
        - derive/([cv])/c/
        - derive/([bn])/b/
        - derive/m/m/

menu:
  __include: naamning_bingwaa.schema:/menu

translator:
  __include: naamning_bingwaa.schema:/translator
  __patch:
      prism: naamning_bingwaa_fourteen

luna_pinyin:
  __include: naamning_bingwaa.schema:/luna_pinyin

stroke:
  __include: naamning_bingwaa.schema:/stroke

cangjie5:
  __include: naamning_bingwaa.schema:/cangjie5
    
wubi86:
  __include: naamning_bingwaa.schema:/wubi86
    
reverse_lookup:
  __include: naamning_bingwaa.schema:/reverse_lookup

punctuator:
  __include: naamning_bingwaa.schema:/punctuator

key_binder:
  __include: naamning_bingwaa.schema:/key_binder

recognizer:
  __include: naamning_bingwaa.schema:/recognizer

zh_hk:
  __include: naamning_bingwaa.schema:/zh_hk

zh_tw:
  __include: naamning_bingwaa.schema:/zh_tw

zh_jp:
  __include: naamning_bingwaa.schema:/zh_jp

emoji_cn:
  __include: naamning_bingwaa.schema:/emoji_cn
